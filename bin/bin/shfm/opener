#!/bin/sh -e

# to swallow you need
# amp, mpv, zathura, sxiv




# Uncomment the following lines if you wanna
# open files in application based on mime-type

case $(file --mime-type "$*" -bL) in
    audio/*)
        FILE=$*
        echo -e "PLAY: ${FILE##*/}\n¯¯¯¯"
        mpv "$FILE"
        ;;
    video/*)
        xdohide "mpv --force-window '$*'"
        ;;
    image/gif)
        if [ -f ~/.config/sxiv/supersxiv ]; then
            xdohide "~/.config/sxiv/supersxiv -a" "$*"
        else 
            xdohide "sxiv -a" "$*"
        fi
        ;;
    image/*)
        if [ -f ~/.config/sxiv/supersxiv ]; then
            xdohide "~/.config/sxiv/supersxiv" "$*"
        else 
            xdohide "sxiv" "$*"
        fi
        ;;
    application/pdf | application/postscript | application/djvu | image/vnd.djvu | application/epub+zip)
        xdohide "zathura '$*'"
        ;;
    *)
        "amp" "$1"
        ;;
esac




# Uncomment the following lines if you wanna
# open files in application based on file extension

# case $1 in
#     *.mp3|*.flac|*.wav)
#         FILE=$*
#         echo -e "PLAY: ${FILE##*/}\n¯¯¯¯"
#         mpv "$FILE"
#         ;;
#     *.mp4|*.mkv|*.webm)
#         xdohide "mpv --force-window '$*'"
#         ;;
#     *.png|*.gif|*.jpg|*.JPG|*.jpe|*.jpeg)
#         if [ -f ~/.config/sxiv/supersxiv ]; then
#             xdohide "~/.config/sxiv/supersxiv -a" "$*"
#         else 
#             xdohide "sxiv -a" "$*"
#         fi
#         ;;
#     *.pdf|*.djvu)
#         xdohide "zathura '$*'"
#         ;;
#     *)
#         "amp" "$1"
#         ;;
# esac
