#!/usr/bin/env sh

echo "$*" | grep "\.ar\." && {
    xdohide xterm -e "${EDITOR:=vim}" "$*" &
    exit
}

echo "$1" | grep "\.sent$" && {
    xdohide sent "$1" &
    exit
}

# remember to have installed the followings:
# geany, pcmanfm, vlc, xarchiver, zathura, sxiv
case $(file --mime-type "$*" -bL) in
    # in case you want to use an already opened process
    # (if there is), use as one of the following examples:
    # pidof pcmanfm || xdohide pcmanfm "$*"
    # pgrep zathura || xdohide zathura "$*"
    # pgrep sxiv || xdohide "sxiv -a" "$*"
    text/* | inode/x-empty | application/json | application/octet-stream)
        xdohide geany "$*"
        ;;
    inode/directory)
        xdohide pcmanfm "$*"
        ;;
    audio/* | video/*)
        xdohide vlc "$*"
        ;;
    application/pdf | application/postscript | application/djvu)
        xdohide zathura "$*"
        ;;
    application/gzip | application/x-tar | application/x-rar | application/zip)
        xdohide xarchiver "$*"
        ;;
    image/gif)
        if [ -f ~/.config/sxiv/supersxiv ]; then
            xdohide "~/.config/sxiv/supersxiv -a" "$*"
        else 
            xdohide "sxiv -a" "$*"
        fi
        ;;
    image/*)
        if [ -f ~/.config/sxiv/supersxiv ]; then
            xdohide "~/.config/sxiv/supersxiv" "$*"
        else 
            xdohide "sxiv" "$*"
        fi
        ;;
esac
