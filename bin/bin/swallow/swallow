#!/usr/bin/env sh

echo "$*" | grep "\.ar\." && {
    xhide xterm -e "${EDITOR:=vim}" "$*" &
    exit
}

echo "$1" | grep "\.sent$" && {
    xhide sent "$1" &
    exit
}


# mpv, sxiv, qtfm, zathura, vim:
# pidof/pgrep sxiv || xhide "sxiv -a" "$*"

case $(file --mime-type "$*" -bL) in
    audio/*)
        FILE=$*
        echo -e "PLAY: ${FILE##*/}\n¯¯¯¯"
        mpv "$FILE"
        ;;
    video/*)
        xhide "mpv --force-window '$*'"
        ;;
    image/gif)
        if [ -f ~/.config/sxiv/supersxiv ]; then
            xhide "~/.config/sxiv/supersxiv -a" "$*"
        else 
            xhide "sxiv -a" "$*"
        fi
        ;;
    image/*)
        if [ -f ~/.config/sxiv/supersxiv ]; then
            xhide "~/.config/sxiv/supersxiv" "$*"
        else 
            xhide "sxiv" "$*"
        fi
        ;;
    inode/directory)
        xhide "qtfm '$*'"
        ;;
    application/pdf | application/postscript | application/djvu | image/vnd.djvu | application/epub+zip)
        xhide "zathura '$*'"
        ;;
    *)
        "${EDITOR:=vim}" "$*"
        ;;
esac
